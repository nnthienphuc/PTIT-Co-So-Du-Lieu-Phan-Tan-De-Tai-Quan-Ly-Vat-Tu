USE [QLVT_DATHANG]
GO
/****** Object:  StoredProcedure [dbo].[sp_KiemTraMaVatTuChiNhanhConLai]    Script Date: 24-Jun-24 8:57:02 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[sp_KiemTraMaVatTuChiNhanhConLai]
	@MAVT NVARCHAR(4)
AS
BEGIN
	IF EXISTS( SELECT 1 FROM LINK1.QLVT_DATHANG.DBO.Vattu as V
				WHERE V.MAVT = @MAVT
				AND				
				(EXISTS(SELECT 1 FROM LINK1.QLVT_DATHANG.DBO.CTPN WHERE CTPN.MAVT = @MAVT))
				OR  (EXISTS(SELECT 1 FROM LINK1.QLVT_DATHANG.DBO.CTDDH WHERE CTDDH.MAVT = @MAVT))
				OR (EXISTS(SELECT 1 FROM LINK1.QLVT_DATHANG.DBO.CTPX WHERE CTPX.MAVT = @MAVT)))
		RETURN 1;

	RETURN 0;
END